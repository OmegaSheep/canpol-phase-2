extends _base

append head
  style: include index.css

append foot
  script(defer): include index.js
  
block main
  .title
    h1=siteTitle
    h4.landlord-count=`Liberal Party: ${partyCounts[0][0]} / ${partyCounts[0][1]} = ${((partyCounts[0][0] / partyCounts[0][1]) * 100).toFixed(2)}% of MP's are Landlords.`
    h4.landlord-count=`Conservative Party: ${partyCounts[1][0]} / ${partyCounts[1][1]} = ${((partyCounts[1][0] / partyCounts[1][1]) * 100).toFixed(2)}% of  MP's are Landlords.`
    h4.landlord-count=`NDP: ${partyCounts[2][0]} / ${partyCounts[2][1]} = ${((partyCounts[2][0] / partyCounts[2][1]) * 100).toFixed(2)}% of  MP's are Landlords.`
    h4.landlord-count=`Bloc Québécois: ${partyCounts[3][0]} / ${partyCounts[3][1]} = ${((partyCounts[3][0] / partyCounts[3][1]) * 100).toFixed(2)}% of  MP's are Landlords.`
    h4.landlord-count=`Green Party: ${partyCounts[4][0]} / ${partyCounts[4][1]} = ${((partyCounts[4][0] / partyCounts[4][1]) * 100).toFixed(2)}% of  MP's are Landlords.`
    h4.landlord-count=`Independant: ${partyCounts[5][0]} / ${partyCounts[5][1]} = ${((partyCounts[5][0] / partyCounts[5][1]) * 100).toFixed(2)}% of  MP's are Landlords.`
    h4.landlord-count=`${partyCounts[6][0]} / ${partyCounts[6][1]} = ${((partyCounts[6][0] / partyCounts[6][1]) * 100).toFixed(2)}% of all MP's are Landlords.`
    p All data sourced from the #[a(href=prciec.href)=prciec.label]
  #root
    .mega-container
      .sorting-container
        p.filter-text Select Party
        select.filter-selector
          each party in ["All", ...[...new Set(mps.map(mp => mp.party))].sort()]
            option(value=party)=party
        p.filter-text Select Province
        select.filter-selector
          each province in ["All", ...[...new Set(mps.map(mp => mp.province))].sort()]
            option(value=province)=province
        p.filter-text Select Riding
        select.filter-selector
          each constituency in ["All", ...mps.map(mp => mp.constituency).sort()]
            option(value=constituency)=constituency
      ul.mp-cards-grid
        each mp in mps
          - const mpNameSlug = mp.name.toLowerCase().replaceAll(" ", "_");
          li.mp-card(data-province=mp.province data-party=mp.party data-constituency=mp.constituency style=`view-transition-name: ${mpNameSlug}`)
            img.mp-portrait(src=`/images/mp_images/${mp.image_name}` alt="" loading="lazy")
            .mp-card-content
              h2.mp-card-title=mp.name
              dl.mp-card-details
                dt.visually-hidden Party
                dd=mp.party
                .mp-constituency-and-province
                  dt.visually-hidden Constituency
                  dd=mp.constituency
                  dt.visually-hidden Province
                  dd=mp.province
              a.mp-card-cta(href=`mp/${mpNameSlug}_${mp.province.toLowerCase()}`) Learn more #[span.visually-hidden about #{mp.name}]
